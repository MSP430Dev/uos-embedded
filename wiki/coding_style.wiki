#summary uOS coding style, draft

= Стиль кодирования =
Этот документ описывает стиль кодирования, принятый в проекте uOS.
Пожалуйста, старайтесь следовать этим рекомендациям, чтобы
поддерживать качество кода.

**Помните!** Код чаще приходится читать, чем писать, поэтому
понятность и чистота кода гораздо важнее скорости набора.

== Идентификаторы ==
Выбирайте имена, которые ясно и четко описывают предназначение и/или смысл
сущности. Старайтесь не использовать сокращения лишний раз, помните о тех,
кто читает код.

Используйте подчеркивание для отделения слов внутри идентификаторов,
это существенно облегчает чтение.

Не используйте малопонятные префиксы или суффиксы (например,
венгерскую нотацию).

Используйте 0 вместо NULL.

Правильно:
{{{
void Method (string my_string)
}}}
Неправильно:
{{{
void Method (string myArgument)

void Method (string lpstrArgument)
}}}

=== Переменные ===
Имена переменных и полей структур должны состоять из строчных букв.
Если имя состоит из нескольких слов, они должны разделяться подчеркиванием,
как "red_push_button".
Не используйте суффиксы или префиксы "`_`", "`m_`" и подобные.

Локальные имена переменных лучше делать короткими.

=== Константы ===
Для констант применяйте имена из заглавных букв. Слова разделяйте
подчеркиванием, например "MAX_CHILDREN".

=== Функции ===
В именах функций, процедур и методов первая буква слова должны быть
заглавная, остальные - строчные (стиль Ada). Слова разделяются подчеркиванием,
например "Create_Top_Window".

=== Типы, классы и интерфейсы ===
Имена типов, классов и интерфейсов создаются аналогично функциям,
но с добавлением суффикса "_t":
{{{
typedef unsigned long Address_t;
}}}

== Отступы ==
Используйте 8-символьную табуляцию, а не пробелы для отступов.
Если правите чужой код - старайтесь придерживаться авторского стиля.

Избегайте строк длиннее 78 символов, переносите инструкцию на другую
строку при необходимости. При переносе части кода на другую строку вторая
последующая строки должны быть отбиты вправо на один отступ (табуляцию).

Не размещайте несколько инструкций на одной строке.
Каждая инструкция должна начинаться с новой строки.

Для уменьшения уровня вложенности кода используйте операторы
continue или break. Например, вместо:
{{{
for (i = 0; i < 10; i++) {
	if (Something (i)) {
		Do_More ();
	}
}
}}}
лучше сделать так:
{{{
for (i = 0; i < 10; i++) {
	if (! Something (i))
		continue;
	Do_More ();
}
}}}

Метки оператора switch размещайте на том же уровне:
{{{
switch (x) {
case 'a':
	...
case 'b':
	...
}
}}}

== Пробелы ==
Ставьте пробел перед открывающей скобкой при вызове функции или
индексировании массива, например:
{{{
Method (a);
b [10];
}}}

Не ставьте пробел после открывающей или перед закрывающей скобкой. Правильно:
{{{
Method (a);	array [10];
}}}
Неправильно:
{{{
Method ( a );	array[ 10 ];
}}}

В операторах ставьте открывающую фигурную скобку на той же строке.
Правильно:
{{{
if (a) {
	Code ();
	Code ();
}
}}}
Неправильно:
{{{
if (a)
{
	Code ();
	Code ();
}
}}}

При объявлении функции располагайте фигурные скобки с новой строки.
Правильно:
{{{
void Method ()
{
}
}}}
Неправильно:
{{{
void Method () {
}
}}}

Не экономьте пробелы в выражениях.
Правильно:
{{{
if (a + 5 > Method (Blah () + 4))
}}}
Неправильно:
{{{
if (a+5>Method(Blah()+4))
}}}

== Файлы ==
Во всех файлах вначале делайте краткое описание.
Добавляйте ссылку на лицензию. Например:
{{{
/*
 * Handle comments in System files.
 *
 * Author: Juan Perez (juan@address.com)
 * Copyright (C) 2002 Address, Inc
 *
 * This file is distributed ...
 * ... licence ...
 */
}}}

Если Вы изменяете чужой код и вносите существенный вклад,
пожалуйста добавьте себя к списку авторов.

=== Имена файлов ===
Файлы должны иметь следующие расширения:
|| *Язык*              || *Расширение* ||
|| Заголовки Си, Си++  ||  .h          ||
|| Код Cи              ||  .с          ||
|| Код Си++            ||  .сpp        ||
|| Заголовки Ada       ||  .ads        ||
|| Код Ada             ||  .adb        ||

Имена файлов Си должны состоять из строчных букв.
Имена файлов Си++ и Ada, а также имена каталогов должны начинаться
с заглавной буквы (стиль Ada).

=== Файлы заголовков ===
Файлы заголовков Си должны содержать защитное обрамление:
{{{
#ifndef MODULE_CLASSNAME_H
#define MODULE_CLASSNAME_H
#ifdef __cplusplus
extern "C" {
#endif

...

#ifdef __cplusplus
}
#endif
#endif
}}}

Файлы заголовков Си++ должны включаться в код с помощью конструкции
"#import", поэтому для них защитное обрамление не требуется.