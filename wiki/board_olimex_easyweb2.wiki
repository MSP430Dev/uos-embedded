#summary Target board: Olimex MSP430-easyWeb2.

[http://www.olimex.com/dev/msp-easyweb2.html http://www.olimex.com/dev/images/eweb2.jpg]

Плата Olimex MSP430-easyWeb2 ([http://www.olimex.com/dev/images/msp430-easyweb2-sch.gif схема])
построена на микроконтроллере MSP430F149. Дополнительная информация доступна
[http://www.olimex.com/dev/msp-easyweb2.html на сайте производителя].
Документация:
 * [http://www.ti.com/lit/gpn/msp430f149 Спецификация]: MSP430x13x, MSP430x14x, MSP430x14x1 Mixed Signal Microcontroller.
 * [http://www.ti.com/litv/pdf/slaz017b Перечень ошибок]: MSP430F13x/14x/14x1 Device Erratasheet.
 * [http://www.ti.com/litv/pdf/slau049f Руководство пользователя]: MSP430x1xx Family User's Guide.

На плате имеется:
 * Порт Ethernet с контроллером CS8900 и тремя светодиодами состояния
 * 1 светодиод с программным управлением
 * 2 цифровых выхода с реле
 * 4 цифровых входа с развязкой через оптопары
 * 1 цифровой вход/выход TTL (разъём EXT)
 * 8 аналоговых входов с 12-битным аналого-цифровым преобразователем (разъём AEXT)
 * 4 кнопки
 * Порт RS-232 DCE
 * Динамик-"пищалка"
 * Текстовый экран LCD, 2 ряда по 16 символов (K2-1602K-FSY-YBW-R, совместим с HD44780)
 * Порт для "таблеток" Dallas
 * Вход частотомера
 * 8-мегагерцовый кварц
 * Разъём программирования и отладки JTAG-14
 * Разъём питания

Память:
 * 60 килобайт flash-памяти для программ
 * 2 килобайта памяти данных (RAM)
 * 64 килобайта неразрушаемой памяти (EEPROM 24LC515)

Питание поступает от внешнего источника постоянного напряжения +7..12 вольт.

Программный код можно загружать в плату через разъём JTAG-14,
с использованием программатора msp430-jtag из пакета [http://mspgcc.sourceforge.net/ MSPGCC].

= Примеры uOS =
В каталоге [http://code.google.com/p/uos-embedded/source/browse/trunk/examples/msp430-f149 examples/msp430-f149] находятся примеры сборки uOS для Olimex easyWeb2.

|| *Тест*                                                                                                        || *Описание*                                                                                       || *Память программ* || *Память данных* ||
|| [http://code.google.com/p/uos-embedded/source/browse/trunk/examples/msp430-f149/test_debug.c test_debug.c]     || Проверка runtime-библиотеки и отладочной печати. Микроядро отсутствует.                         || 470 байт (0.3%)   || 2 байта         ||

= Сигналы =

Привязка сигналов платы к ножкам процессора:
|| *На плате*                     || *На процессоре* || *Дополнительные функции* ||
|| Вход частоты FREQ              || P1.0            || ---                      ||
|| Вход оптопары 1                || P1.1            || ---                      ||
|| Вход оптопары 2                || P1.2            || ---                      ||
|| Вход оптопары 3                || P1.3            || ---                      ||
|| Вход оптопары 4                || P1.4            || ---                      ||
|| Управление реле 1              || P1.5            || ---                      ||
|| Управление реле 2              || P1.6            || ---                      ||
|| Разъём Dallas                  || P1.7            || ---                      ||
|| Порт EXT / 1      		  || P2.0            || ---                      ||
|| Управление светодиодом статуса || P2.1            || ---                      ||
|| Управление LCD                 || P2.2            || RS                       ||
|| Управление LCD                 || P2.3            || E                        ||
|| Управление LCD                 || P2.4            || D4                       ||
|| Управление LCD                 || P2.5            || D5                       ||
|| Управление LCD                 || P2.6            || D6                       ||
|| Управление LCD                 || P2.7            || D7                       ||
|| Управление Ethernet            || P3.0            || A0                       ||
|| Управление Ethernet            || P3.1            || A1                       ||
|| Управление Ethernet            || P3.2            || A2                       ||
|| Управление Ethernet            || P3.3            || A3                       ||
|| Порт RS-232                    || P3.4            || TXD0, порт EXT / 4       ||
|| Порт RS-232                    || P3.5            || RXD0, порт EXT / 3       ||
|| Управление Ethernet            || P3.6            || /IOR                     ||
|| Управление Ethernet            || P3.7            || /IOW                     ||
|| Обращение к EEPROM             || P4.0            || SDA, порт EXT / 5        ||
|| Обращение к EEPROM             || P4.1            || SCL, порт EXT / 6        ||
|| Динамик                        || P4.2            || ---                      ||
|| Динамик                        || P4.3            || ---                      ||
|| Кнопка 1                       || P4.4            || ---                      ||
|| Кнопка 2                       || P4.5            || ---                      ||
|| Кнопка 3                       || P4.6            || ---                      ||
|| Кнопка 4                       || P4.7            || ---                      ||
|| Управление Ethernet            || P5.0            || SD0                      ||
|| Управление Ethernet            || P5.1            || SD1                      ||
|| Управление Ethernet            || P5.2            || SD2                      ||
|| Управление Ethernet            || P5.3            || SD3                      ||
|| Управление Ethernet            || P5.4            || SD4                      ||
|| Управление Ethernet            || P5.5            || SD5                      ||
|| Управление Ethernet            || P5.6            || SD6                      ||
|| Управление Ethernet            || P5.7            || SD7                      ||
|| Порт AEXT / 2                  || P6.0            || AI0                      ||
|| Порт AEXT / 3                  || P6.1            || AI1                      ||
|| Порт AEXT / 4                  || P6.2            || AI2                      ||
|| Порт AEXT / 5                  || P6.3            || AI3                      ||
|| Порт AEXT / 6                  || P6.4            || AI4                      ||
|| Порт AEXT / 7                  || P6.5            || AI5                      ||
|| Порт AEXT / 8                  || P6.6            || AI6                      ||
|| Порт AEXT / 9                  || P6.7            || AI7                      ||
|| Порт AEXT / 10                 || VEREF+          || ---                      ||
|| Порт AEXT / 11                 || VREF+           || ---                      ||
|| Порт AEXT / 12                 || VREF-           || ---                      ||


= Программатор и отладчик =
[http://www.olimex.com/dev/msp-jtag.html http://www.olimex.com/dev/images/msp430-jtag.jpg]

В качестве аппаратного интерфейса к JTAG-порту я использую LPT-адаптер [http://www.olimex.com/dev/msp-jtag.html Olimex MSP430-JTAG].

Для отладки через GDB нужно установить утилиту [http://uos-embedded.googlecode.com/files/msp430-gdbproxy.zip msp430-gdbproxy].
В её состав входят библиотеки libHIL и libMSP430, которые требуются также для утилиты прошивки.
Для установки запустите скрипт install.sh.

Утилита прошивки msp430-jtag входит в состав пакета [http://mspgcc.sourceforge.net/ MSPGCC].
Её исходные тексты можно скачать командами:
{{{
cvs -d:pserver:anonymous@mspgcc.cvs.sourceforge.net:/cvsroot/mspgcc login
cvs -z3 -d:pserver:anonymous@mspgcc.cvs.sourceforge.net:/cvsroot/mspgcc co python -d mspgcc-python
}}}

Для установки исправьте в файле mspgcc-python/makefile значение PREFIX на /usr/local/bin
и выполните команды:
{{{
cd mspgcc-python
sudo make install
}}}
