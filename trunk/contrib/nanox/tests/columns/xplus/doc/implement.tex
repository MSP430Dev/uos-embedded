%-------------------------------------------------
% Описание XPLUS - инструментальной C++ библиотеки
% для разработки % программ в среде X Windows
%
% Базовые классы:
%       xWindow - обобщенное окно
%       xScreen - экран
%       xEvent  - событие
%       xInput  - список принимаемых событий
%       xOutput - вывод
%       xFont   - шрифт
%       xBitmap - растр
%       xPixmap - изображение
%       xCursor - форма курсора
%
%       xImage  - изображение
%       xGrayImage - изображение
%       xColorImage - изображение
%
% Разное:
%       slist
%       textbuf
%       ttable
%       utils
%-------------------------------------------------

Словарь.
~~~~~~~~
Потомок - класс, построенный на основе уже
имеющегося (базового) класса.

Базовый класс - класс, используемый для построения
других классов (потомков).

Виртуальная функция (virtual) - функция, определенная как элемент
базового класса, которая может переопределяться классами-потомками.

Иерархия классов - логическая структура (дерево) классов в порядке
их наследования.

Дерево окон - структура (дерево) окон в порядке их подчинения.

Окно - визуальный объект, обычно прямоугольной формы, с присущим ему
``поведением''. Потомок класса xWindow. Может иметь несколько подчиненных
окон и само подчинено окну-родителю.

Подчиненное окно - окно, входящее в состав и являющееся частью изображения
другого окна (родителя). В XPLUS всякое окно имеет родителя.
Сужествует специальное окно-экран, выполняющее роль родителя для окон
верхнего уровня.  Окно-экран подчинено самому себе.

Простое окно - окно, не имеющее подчиненных окон.

Составное окно - окно, имеющее одно или несколько (состоящее из)
подчиненных окон.

Экран - окно класса xScreen, корень дерева окон.

Геометрия окна - максимальные, минимальные и оптимальные ширина и высота окна,
а также шаг их изменения.

Атрибут окна - именованный параметр, влияющий на функционирование окна.
В терминологии Xlib - resource.

Событие - объект класса xEvent.

Вывод - объект класса xOutput.

Ввод - объект класса xInput.

Пиксел - целое число, представляющее точку определенного
цвета на экране.  Цвет, заданный RGB-координатами,
можно преобразовать в пиксел.  Цвет полученного пиксела
может отличаться от требуемого, в зависимости от
характеристик используемого X-дисплея.  Черный и белый
цвета всегда отображаются без искажений.

Цвет - объект класса xColor, задается тремя компонентами
(RGB).

Класс: xWindow
~~~~~~~~~~~~~~
Это основной класс для построения оконных элементов.
Сам по себе класс xWindow большого смысла не имеет,
но он используется в качестве базового при описании
других интерактивных классов. Классы-потомки посредством
переопределения виртуальных функций задают алгоритмы
поведения данного конкретного класса.

Везде в описании XPLUS под термином ``окно'' понимается
``объект класса xWindow или его потомка''.

Окно может быть простым или составным.
В последнем случае оно имеет несколько подчиненных окон.
Фактически, все множество окон образует дерево,
в корне которого находится ``экран'' --- объект класса xScreen.

Важной характеристикой окна является его размер.
В XPLUS каждое окно имеет текущий размер, а также задает геометрию
окна --- диапазон, шаг изменения и оптимальное значение размера. Простые окна
вычисляют геометрию на основании своих внутренних параметров,
составные --- на основании геометрии подокон.
Окна самого верхнего уровня сообщают свою геометрию оконному менеджеру,
который использует ее при изменении размеров окна-оболочки.

Пользователь управляет характеристиками окон посредством
задания атрибутов (ресурсов --- в терминах Xlib).
Каждому окну при создании приписывается имя класса и имя экземпляра.
При запросе окном атрибута полное его имя образуется
из названия и класса атрибута, имени и класса окна, имени и класса
окна-родителя и т.д., до имени окна-экрана.

Новое окно создается вызовом конструктора, в параметрах которого
указывается окно-родитель.  После этого окно пребывает в фазе зародыша,
до тех пор, пока не произойдет его инициализация вызовами ComputeSize,
Initialize.  При инициализации создается окно Xlib и оно начинает жить
полноценной жизнью.

Интерфейс:
~~~~~~~~~~
class xWindow {
public:
	int             x, y;
	short           width, height;

	short           min_width, min_height;
	short           max_width, max_height;
	short           opt_width, opt_height;
	short           width_inc, height_inc;

	xScreen         *screen;
	xWindow         *parent;

	xWindow (xWindow *, char *, char *);
	~xWindow ();

	void Listen (xInput *);

	void Insert (xWindow *);
	void Delete (xWindow *);

	virtual void ComputeSize ();
	virtual void Initialize ();
	virtual void Resize ();
	virtual void Handle (xEvent &);
	virtual void Redraw (int, int, int, int);
	virtual void Redraw ();

	int QueryPointer (int *, int *);

	void Move (int, int);
	void Map ();
	void Map (int a, int b);
	void Unmap ();

	void SetBackground (xPixel);

	void Clear ();
	void Clear (int, int, int, int, int=0);

	void DefineCursor (xCursor *);
	void UndefineCursor ();

	void AdjustWidth ();
	void AdjustHeight ();

	char *GetAttribute (char *, char * = 0);

protected:
	SimpleList      *childlist;
	long            xwin;
	QuarkList       *classq, *nameq;

private:
	int             mapflag;
};

short width, height
	Текущая ширина и высота окна. При инициализации
	они обычно устанавливаются в оптимальные значения.
	В дальнейшем их значением управляет окно-родитель.

int x, y
	Координаты окна относительно окна-родителя.
	Их значением управляет исключительно окно-родитель.

short min_width, min_height
short max_width, max_height
short opt_width, opt_height
short width_inc, height_inc
	Минимальные, максимальные, оптимальные размеры окна
	и приращения размеров.  Устанавливаются вызовом ComputeSize
	при инициализации и в дальнейшем не изменяются.

xScreen *screen
	Указатель на объект-экран, на котором отображается окно.
	Устанавливается при создании окна и в дальнейшем не изменяется.

xWindow *parent
	Указатель на объект-родитель, которому подчинено окно.
	Устанавливается при создании окна и в дальнейшем не изменяется.

long xwin
	Идентификатор окна Xlib.  Устанавливается при инициализации
	и используется виртуальными функциями классов-потомков.

SimpleList *childlist
	Список подчиненных окон.  Для доступа к этому списку служат
	функции Insert, Delete.

QuarkList *classq, *nameq
	Списки кварков для быстрого поиска атрибутов (ресурсов) окна.
	Устанавливаются при создании окна, используются потомками и функцией
	GetAttribute.

int mapflag
	Устанавливается в 1 если разрешено отображение окна (Map).

xWindow (xWindow *, char *, char *)
	Создание нового окна.  Параметры --- окно-родитель, имя класса
	и имя экземпляра.  Расписывает некоторые поля, создает списки
	кварков и пустой список подчиненных окон.  Добавляет окно
	к списку подчиненных окон родителя.

~xWindow ()
	Уничтожение окна.

virtual void ComputeSize ()
	Вычисление геометрии окна.  Для всех потомков вызывает
	ComputeSize, затем исходя из их размеров вычисляет собственную
	геометрию.  Вызывается непосредственно перед Initialize,
	обычно из xScreen.Run.

virtual void Initialize ()
	Инициализация окна.  Создает окно Xlib, регистрирует его
	дешифраторе событий (xScreen.RegisterTarget), устанавливает пустую
	маску событий, включает отображение окна (Map), если оно разрешено.
	Затем вызывает Initialize для всех подокон.

void Insert (xWindow *)
void Delete (xWindow *)
	Добавление и удаление указанного окна из списка подчиненных
	окон.

void Listen (xInput *)
	Установка маски получаемых событий.

virtual void Handle (xEvent &)
	Обработка полученного события.

virtual void Resize ()
	Обработка изменения размера.  Окно-родитель изменило
	размер данного окна (width, height) и вызывает Resize
	для этого окна, чтобы оно могло произвести необходимые
	действия (например, переупорядочить подчиненные окна).

virtual void Redraw ()
	Перерисовка всего окна.

virtual void Redraw (int x, int y, int w, int h)
	Перерисовка части окна размером (w, h) с точки (x, y).

int QueryPointer (int *, int *)
	Запрос положения курсора относительно данного окна.
	Координаты курсора (x, y) записываются по указанным адресам.
	Возвращает 1 если курсор находится на нужном экране.

void Move (int newx, int newy)
	Перемещение окна в новую позицию относительно родителя.

void Map ()
	Разрешение отображения окна.

void Map (int, int)
	Перемещение, затем разрешение отображения.

void Unmap ()
	Запрет отображения.

void SetBackground (xPixel)
	Установка фонового цвета окна. Параметр --- значение пиксела.

void Clear ()
	Стирание всего окна (заливка фоновым цветом).

void Clear (int x, int y, int w, int h, int exp=0)
	Стирание части окна размером (w, h) с точки (x, y).
	Если параметр exp не равен нулю, происходит посылка
	сообщения Exposure.

void DefineCursor (xCursor *)
	Установка курсора для окна.

void UndefineCursor ()
	Установка курсора по умолчанию.

void AdjustWidth ()
void AdjustHeight ()
	Вспомогательные функции --- корректировка размеров окна
	в соответствии с геометрией.  Размеры должны удовлетворять
	соотношению dim = min + N*inc.

char *GetAttribute (char *classname, char *instname=0)
	Запрос атрибута окна.  Параметры - имя класса и
	имя атрибута.  Если имя атрибута не указано, оно
	образуется из имени класса преобразованием первой буквы
	(большой) в маленькую.


Класс: xScreen (xWindow)
~~~~~~~~~~~~~~~~~~~~~~~~
Объект класса xScreen (экран) выполняет роль ``главного''
окна, а также роль канала связи с X сервером.  Создание экрана
обычно происходит в начале работы программы и означает
установление связи с сервером.  Окна верхнего уровня
подчиняются экрану.  Ширина, высота и глубина окна-экрана
соответствуют параметрам физического экрана сервера.

Одна из самых важных функций экрана - получение, дешифровка
и распределение событий по окнам.  Экран хранит таблицу соответствия
номера окна Xlib адресу окна XPLUS.  При получении события Xlib
происходит преобразование его из формата XEvent в формат xEvent.
Затем вызывается функция Handle соответствующего окна XPLUS.

Все приходящие события делятся на три категории.
1) Событие, передаваемое окну:
    - нажатие кнопки на мыши (ButtonPress)
    - отжатие кнопки на мыши (ButtonRelease)
    - нажатие клавиши (KeyPress)
    - движение мыши (MotionNotify)
    - вход курсора в окно (EnterNotify)
    - выход курсора из окна (LeaveNotify)
   Эти события после дешифрации передаются соответствущему окну
   посредством вызова Handle.
2) Перерисовка части окна (Expose).
   При получении этого события немедленно вызывается
   функция Redraw (x, y, w, h) соответствующего окна,
   которая должна перерисовать изображение на указанном
   участке.
3) Изменение размера окна (ConfigureNotify).
   При получении этого события корректируются размеры
   (width, height) соответствующего окна, затем вызывается
   функция Resize ().  Окно должно отреагировать на изменение
   размера перевычислением положения и размера подокон и т.п.
   Перерисовывать изображение при этом не нужно, поскольку
   за изменением размера последует событие перерисовки.

Экран также хранит базу данных атрибутов (XResources), которая
инициализируется при создании экрана и используется функцией
GetAttribute класса xWindow.

Интерфейс:
~~~~~~~~~~
class xScreen : public xWindow {
public:
	int depth;
	xPixel fgpixel;
	xPixel bgpixel;

	xScreen (char *, int *, char **);
	~xScreen ();

	xFont *DefaultFont ();

	void Read (xEvent&);
	void Run ();

	void WarpPointer (int, int);
	void Flush ();

	xPixel Pixel (char *);
	xPixel Pixel (int, int, int);
	xPixel Pixel (int)
	xPixel Pixel (xColor)
	xColor Color (xPixel);

private:
	Display         *xdpy;
	Screen          *xscr;
	long            xcmap;
	Visual          *xvisual;
	xFont           *font;
	_XrmHashBucketRec *database;

	class TargetTable *ttable;

	struct PixelTable *pixtable;
	class NameTable *cnametable;
	class HashTable *cvaltable;
	int             nred;
	int             ngreen;
	int             nblue;
	int             ngray;

	void RegisterTarget (xWindow *);
	void UnregisterTarget (xWindow *);
	xWindow *FindTarget (long);
	void CreateDatabase (char *);

	PixelTable *GetColorRGBIndex (int, int, int);
	void AllocateRGBColor (PixelTable *, int, int, int);
};

int depth
	Содержит глубину (количество плоскостей) физического
	экрана X-дисплея.

xPixel fgpixel
	Значение пиксела основного цвета, используемого по умолчанию.
	Обычно это черный цвет.

xPixel bgpixel
	Значение пиксела фонового цвета, используемого по умолчанию.
	Обычно это белый цвет.

Display *xdpy
	Идентификатор дисплея Xlib.  Все прочие объекты XPLUS,
	имеющие отношение к Xlib, ссылаются на соответствующий
	экран, и используют это поля xdpy, xscr, xcmap для работы с Xlib.

Screen *xscr
	Идентификатор экрана Xlib.

long xcmap
	Идентификатор палитры Xlib.

xFont *font
	Шрифт, используемый по умолчанию.

_XrmHashBucketRec *database
	База данных ресурсов. Используется функцией GetAttribute
	класса xWindow.

class TargetTable *ttable
	Таблица для преобразования идентификатора окна Xlib
	в адрес объекта-окна XPLUS.  Используется при обработке
	приходящих событий.

xScreen (char *, int *, char **)
	Создание экрана, подключение к X серверу.  Параметры - имя
	класса программы, указатель на количество аргументов программы,
	таблица указателей на аргументы.
	Имя класса программы - это обобщенное название программы,
	обычно начинается с большой буквы.  Используется при поиске
	атрибутов.
	Количество и таблица аргументов - это параметры
	функции main, используемые для обработки флагов,
	характерных для X Windows.  После обработки
	нужных флагов они удаляются из таблицы и количество
	аргументов уменьшается.  Из полученной таблицы программа
	может извлекать собственные параметры.

~xScreen ()
	Уничтожение экрана, отключение от X сервера.

xFont *DefaultFont ()
	Возвращает шрифт, используемый по умолчанию.

void Read (xEvent&)
	Ожидание следующего события.  Полученное событие возвращается
	в аргументе.  Возвращается только событие типа 1 (см. описание
	класса xScreen).  Перерисовка и изменение размера обрабатываются
	немедленно.

void Run ()
	``Сотворение мира''.  Это центральная функция в жизнедеятельности
	программы на XPLUS.  До этого момента программа занималась
	подготовительной деятельностью: разбирала аргументы,
	создавала иерархию окон, устанавливала необходимые атрибуты.
	До сих пор окна существовали в зародыше.  Вызов Run производит
	инициальзацию всего дерева окон, затем входит
	в цикл чтения (xScreen.Read) и распределения событий
	по окнам (xWindow.Handle).

void WarpPointer (int dx, int dy)
	Корректировка положения курсора.  Передвигает курсор
	на интервал (dx, dy).  Данную операцию рекомендуется
	использовать только в случае крайней необходимости, так
	как самовольные ``прыжки'' курсора воспринимаются пользователем
	резко отрицательно.

void Flush ()
	``Выталкивание'' буфера запросов Xlib.  Все выдаваемые
	программой запросы к серверу буферизуются с целью уменьшения
	количества пакетов, проходящих по сети.  В обычном режиме
	буфер выталкивается запросами xScreen.Read, и это не сказывается
	на работе программы.  Но иногда, например при отладке, бывает
	нужно вытолкнуть буфер в некоторый момент, чтобы видеть
	происходящие изменения.  Это можно сделать вызовом Flush.


Класс: xEvent
~~~~~~~~~~~~~
Объект класса xEvent (событие) представляет собой сообщение,
получаемое окном, и несущие информацию о действиях
пользователя (нажатие клавиш, движение мыши и т.п.).

Фактически, смысл существования объекта-окна состоит в
получении и обработке нужных событий.

Все объекты типа xEvent создаются внутри функции xScreen.Read.

Есть два способа обработки событий окном:
1) Пассивный, или асинхронный способ.  В момент прихода
события, предназначенного некоторому окну, происходит
вызов функции Handle данного окна.  Функция Handle обычно
представляет собой переключатель (switch) по типу события,
который обрабатывает каждое событие характерным для
него образом.  Каждое окно получает только свои события,
не мешая остальным.  Большинство окон работает именно
таким образом.
2) Активный, или синхронный способ.  Окно принимает событие
вызовом xScreen.Read, затем анализирует поле window.
Если оно равно адресу данного окна, оно обрабатывается.
Если же поле window содержит адрес другого окна, то событие
игнорируется.  Этот способ производит эффект монопольного
``захвата власти'' окном и приостановки действия других окон.

События бывают следующего вида (тип xEventType):
  - нажатие кнопки на мыши (xEventDown)
  - отжатие кнопки на мыши (xEventUp)
  - нажатие клавиши (xEventKey)
  - вход курсора в окно (xEventEnter)
  - выход курсора из окна (xEventLeave)
  - движение мыши (xEventMotion)
  - движение мыши с нажатой кнопкой (xEventButtonMotion)
  - движение мыши с нажатой 1-й кнопкой (xEventButton1Motion)
  - движение мыши с нажатой 2-й кнопкой (xEventButton2Motion)
  - движение мыши с нажатой 3-й кнопкой (xEventButton3Motion)

В будущем планируется ввести типы событий для работы с таймером,
межоконного и межпроцессного взаимодействия.

Стоит отметить отличие событий в XPLUS от событий в Xlib:
перерисовка окна (Expose) и изменение размера (ConfigureNotyfy)
не считаются событиями в XPLUS и обрабатываются особым образом.

Не все поля структуры xEvent определены для всех типов событий.
В приведенной ниже таблице обозначены поля и события, для которых
они имеют смысл.

--------------------------------------------------------------
		Down    Up      Key     Enter   Leave   Motion
--------------------------------------------------------------
window          *       *       *       *       *       *
type            *       *       *       *       *       *
time            *       *       *       *       *       *
x, y            *       *       *       *       *       *
state           *       *       *       *       *       *
button          *       *       *
keystring                       *
len                             *
--------------------------------------------------------------

Интерфейс:
~~~~~~~~~~
enum xEventType {
	xEventDown, xEventUp, xEventKey, xEventEnter,
	xEventLeave, xEventMotion, xEventButtonMotion,
	xEventButton1Motion, xEventButton2Motion,
	xEventButton3Motion,
};

enum xButtonType {
	xButtonLeft, xButtonMiddle, xButtonRight,
};

static const xModShift, xModLock, xModControl, xModMeta,
	xModLeftMouse, xModMiddleMouse, xModRightMouse;

class xEvent {
public:
	xWindow* window;
	xEventType type;
	unsigned long time;
	int x, y;
	int state;
	unsigned char button;
	unsigned short len;
	char *keystring;

	void Parse (XEvent &);
	void Quit ();

private:
	char keydata [8];
};

enum xEventType
	Тип события (см. описание xEvent).

enum xButtonType
	Номер кнопки на мыши.  Содержится в поле button событий
	xEventDown и xEventUp:
	    xButtonLeft - левая (1-я) кнопка
	    xButtonMiddle - средняя (2-я) кнопка
	    xButtonRight - правая (3-я) кнопка

static const xModShift, xModLock, xModControl, xModMeta,
    xModLeftMouse, xModMiddleMouse, xModRightMouse;
	Маска модификаторов.  Комбинация этих значений
	содержится в поле state всех событий и дает
	информацию о состоянии клавиш Shift, CapsLock, Control,
	Alt и кнопок мыши в момент возникновения события.

xWindow* window
	Указатель на окно, к которому относится данное событие.

xEventType type
	Тип события (см. xEventType).

unsigned long time
	Момент времени возникновения события, количество миллисекунд
	с момента запуска X-сервера.

int x, y
	Координаты курсора относительно окна в момент возникновения
	события.

int state
	Состояние клавиш-модификаторов в момент возникновения события.

unsigned char button
	Номер кнопки (xEventDown, xEventUp) или клавиши (xEventKey).
	Кнопка задается константой типа xButtonType, номера клавиш
	описаны в файле <X11/keysymdef.h>.

char *keystring
	Указатель на строку, содержащую ASCII-представление
	клавиши события xEventKey (указывает на keydata).

unsigned short len
	Длина строки keystring.

void Parse (XEvent &)
	Преобразование события Xlib в событие XPLUS.

void Quit ()
	Если при обработке некоторого события окно решает
	самоликвидироваться, оно должно вызвать функцию
	Quit от этого события и вернуть управление.
	Когда управление вернется в диспетчер событий,
	он уничтожит окно.

Класс: xInput
~~~~~~~~~~~~~
Обьект класса xInput (ввод) хранит список событий, принимаемых некоторым окном.
Чтобы установить список событий для окна, нужно
создать его, вызовом xInput.Catch добавить нужные значения
и вызовом xWindow.Listen приписать список окну.

Интерфейс:
~~~~~~~~~~
class xInput {
public:
	xInput ();
	xInput (xInput *);

	void Catch (xEventType);
	void Ignore (xEventType);

private:
	int mask;
};

int mask
	Маска событий.

xInput ()
	Создание пустого списка событий.

xInput (xInput *)
	Создание копии указанного списка событий.

void Catch (xEventType)
	Добавление события к списку.

void Ignore (xEventType)
	Удаление события из списка.


Класс: xOutput
~~~~~~~~~~~~~~
Объект класса xOutput (вывод) служит для выполнения базовых графических
операций.  Он хранит информацию о цвете, способе заливки и т.п.,
и использует ее при отрисовке.  Вывод - довольно дешевая вещь,
о обычно окна создают столько экземпляров выводов, сколько
различных цветов, заливок и пр. им нужно.  Вывод во многом аналогичен
графическому контексту Xlib.

Интерфейс:
~~~~~~~~~~
class xOutput {
public:
	xScreen         *screen;

	xOutput (xScreen *);
	xOutput (xOutput *);
	~xOutput ();

	void SetForeground (xPixel);
	void SetBackground (xPixel);

	void SetFunction (int);
	void SetStipple (xBitmap *, int=0);

	void CopyArea (xWindow *, xWindow *, int, int, int, int, int, int);

	void DrawPoint (xWindow *, int, int);
	void DrawLine (xWindow *, int, int, int, int);
	void DrawRectangle (xWindow *, int, int, int, int);
	void DrawArc (xWindow *, int, int, int, int, int, int);

	void FillRectangle (xWindow *, int, int, int, int);
	void FillArc (xWindow *, int, int, int, int, int, int);
	void FillPolygon (xWindow *, int ...);

	void DrawText (xWindow *, xFont *, int, int, char *, int, int=0);

private:
	_XGC            *xgc;
};

xScreen *screen;
	Экран, к которому относится вывод.

_XGC *xgc;
	Дескриптор графического контекста Xlib.

xOutput (xScreen *);
	Создание вывода для экрана.  Устанавливаются
	цвета и режимы по умолчанию.

xOutput (xOutput *);
	Создание копии вывода.  Вывод-копия получает те же цвета
	и режимы, что и оригинал.

~xOutput ();
	Уничтожение вывода.

void SetForeground (xPixel);
	Установка основного цвета вывода по значению пиксела.

void SetBackground (xPixel);
	Установка фонового цвета вывода по значению пиксела.

void SetFunction (int);
	Установка функции графики.

void SetStipple (xBitmap *, int=0);
	Установка штриховки.  Параметры - растр, задающий
	изображение для штриховки, и флаг ``прозрачности''
	штриховки.

void CopyArea (xWindow *from, xWindow *to, int x1, int y1, int w, int h, int x2, int y2);
	Перепись участка изображения из окна в окно.

void DrawPoint (xWindow *, int x, int y);
	Рисование точки.

void DrawLine (xWindow *, int x1, int y1, int x2, int y2);
	Рисование линии.

void DrawRectangle (xWindow *, int x1, int y1, int w, int h);
	Рисование прямоугольника.

void DrawArc (xWindow *, int x, int y, int w, int h, int a1, int a2);
	Рисование дуги эллипсоида. Центр эллипсоида находится в точке
	(x+w/2, y+h/2), полуоси равны w/2, h/2. Углы a1 и a2, измеренные
	в градусах *64 от 3 час. против часовой стрелки, задают
	начальный и конечный углы дуги.

void FillRectangle (xWindow *, int, int, int, int);
	Рисование закрашенного прямоугольника.

void FillArc (xWindow *, int, int, int, int, int, int);
	Рисование закрашенного сектора дуги.

void FillPolygon (xWindow *, int ...);
	Рисование закрашенного многоугольника.

void DrawText (xWindow *, xFont *, int x, int y, char *text, int len, int eraseflg=0);
	Рисование текстовой строки.  Если задан eraseflg, область
	под текстом закрашивается фоновым цветом.


Класс: xColor
~~~~~~~~~~~~~
Объект класса xColor (цвет) служит для преобразования
имени цвета или значения в координатах RGB в значение пиксела.
Пакет XPLUS использует палитру по умолчанию.  Если
при создании цвета в палитре не осталось свободных
мест, изпользуется пиксел с наиболее близким цветом.

Интерфейс:
~~~~~~~~~~
class xColor {
public:
	xScreen         *screen;

	xColor (xScreen *, char *);
	xColor (xScreen *, int=0, int=0, int=0);
	~xColor ();

private:
	long            xpixel;
};

xScreen *screen;
	Экран, к которому относится цвет.

long xpixel;
	Значение пиксела.

xColor (xScreen *, char *);
	Создание цвета по имени.

xColor (xScreen *, int=0, int=0, int=0);
	Создание цвета по значениям RGB.

~xColor ();
	Удаление цвета.


Класс: xFont
~~~~~~~~~~~~
Интерфейс:
~~~~~~~~~~
class xFont {
public:
	xFont (xScreen *scr, char *name);
	~xFont ();

	int Width (char *, int);
	int Width ();
	int Height ();
	int Ascent ();
	int Descent ();

private:
	xScreen         *screen;

	int             maxwidth;               // maximum width of character
	int             height;                 // font height
	int             ascent;                 // font ascent
	int             descent;                // font descent

	XFontStruct     *info;
};
