On interrupt, the state of registers is saved in the current task stack.

Before interrupt:	        After saving registers:			Cortex-M3:

        | ///////////// |               | ///////////// |                | ///////////// |
	|---------------|               |---------------|                |---------------|
   SP-> | ///////////// |      Old SP ->| ///////////// |	Old SP ->| ///////////// |
	|---------------|               |---------------|                |---------------|
	|               |               |      PC       |                |     xPSR      |
	|---------------|               |---------------|                |---------------|
	|               |               |     CPSR      |                |      PC       |
	|---------------|               |---------------|                |---------------|
	|               |               |      LR       |                |      LR       |
	|---------------|               |---------------|                |---------------|
	|               |               |      R12      |                |      R12      |
	|---------------|               |---------------|                |---------------|
	|               |               |      R11      |                |      R3       |
	|---------------|               |---------------|                |---------------|
	|               |               |      R10      |                |      R2       |
	|---------------|               |---------------|                |---------------|
	|               |               |      R9       |                |      R1       |
	                                |---------------|                |---------------|
	                                |      R8       |                |      R0       |
                                        |---------------|                |---------------|
                                        |      R7       |                |      R11      |
                                        |---------------|                |---------------|
                                        |      R6       |                |      R10      |
                                        |---------------|                |---------------|
                                        |      R5       |                |      R9       |
                                        |---------------|                |---------------|
                                        |      R4       |                |      R8       |
                                        |---------------|                |---------------|
                                        |      R3       |                |      R7       |
                                        |---------------|                |---------------|
                                        |      R2       |                |      R6       |
                                        |---------------|                |---------------|
                                        |      R1       |                |      R5       |
                                        |---------------|                |---------------|
                               New SP ->|      R0       |       New SP ->|      R4       |
                                        |---------------|                |---------------|
                                        |               |                |               |
